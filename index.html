
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matter.js Example</title>
</head>
<body>

<!-- Include Matter.js from CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

<!-- Your custom JavaScript code using Matter.js -->

<style>
    canvas {
        margin: 0 auto;
        display: block;
        background: url("background.png");
    }

    .preview {
        display: block;
    }
</style>

<div class="preview"></div>

<button onclick="add()">
    Add
</button>

<button onclick="toggleGravity()">
    Toggle Gravity
</button>

<script>
        // Set canvas size
    const canvasWidth = 1100;
    const canvasHeight = 700;

    const objects = {
        basketball: {
            width: 80,
            height: 80,
            texture: '/basketball.png'
        },
        fishbowl: {
            width: 80,
            height: 80,
            texture: '/fishbowl.png'
        },
        robot: {
            width: 160,
            height: 192,
            texture: '/robot.png'
        },
        blahaj: {
            width: 160,
            height: 81,
            texture: '/blahaj.png'
        },
        armchair: {
            width: 200,
            height: 231,
            texture: '/armchair.png'
        },
        spacesuit: {
            width: 200,
            height: 335,
            texture: '/spacesuit.png'
        },
        wardrobe: {
            width: 200,
            height: 387,
            texture: '/wardrobe.png'
        },
        radio: {
            width: 120,
            height: 80,
            texture: '/radio.png'
        },
        cactus: {
            width: 50,
            height: 85,
            texture: '/cactus.png'
        },
        monitor: {
            width: 100,
            height: 100,
            texture: '/monitor.png'
        },
        keyboard: {
            width: 120,
            height: 50,
            texture: '/keyboard.png'
        },
        books: {
            width: 55,
            height: 30,
            texture: '/books.png'
        },
        window1: {
            width: 200,
            height: 165,
            texture: '/window.png',
            isStatic: true
        },
        sunflowers: {
            width: 100,
            height: 139,
            texture: '/sunflowers.png'
        },
        screen: {
            width: 169,
            height: 100,
            texture: '/screen.png',
            isStatic: true
        },
        window2: {
            width: 200,
            height: 200,
            texture: '/window2.png',
            isStatic: true
        },
        poster: {
            width: 100,
            height: 200,
            texture: '/poster.png',
            isStatic: true
        },
        desk: {
            width: 360,
            height: 200,
            texture: '/desk.png'
        }
    }

    const { Engine, Render, World, Bodies, Runner, Mouse, MouseConstraint } = Matter;

    const engine = Engine.create();
    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: canvasWidth,
            height: canvasHeight,
            wireframes: false, // disable Wireframe
            background: 'background.png',
        }
    });

    const leftWall = Bodies.rectangle(0, canvasHeight / 2, 10, canvasHeight, { isStatic: true });
    const rightWall = Bodies.rectangle(canvasWidth, canvasHeight / 2, 10, canvasHeight, { isStatic: true });
    const topWall = Bodies.rectangle(canvasWidth / 2, 0, canvasWidth, 10, { isStatic: true });
    const bottomWall = Bodies.rectangle(canvasWidth / 2, canvasHeight, canvasWidth, 10, { isStatic: true });

    World.add(engine.world, [
        leftWall, rightWall, topWall, bottomWall]);
    // engine.world.gravity.y = 0;

    // Create a mouse
    const mouse = Mouse.create(render.canvas);

    // Create a mouse constraint
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
    });

    // Add the mouse constraint to the world
    World.add(engine.world, mouseConstraint);

    // Engine.run(engine);
    Runner.run(engine);
    Render.run(render);



    function setPreview() {
        const preview = document.querySelector('.preview');
        const randomObject = Object.keys(objects)[Math.floor(Math.random() * Object.keys(objects).length)];

        preview.style.width = randomObject.width;
        preview.style.height = randomObject.height;
        preview.style.backgroundImage = `url(${objects[randomObject].texture})`;

    }

    function add() {
        const randomObject = Object.keys(objects)[Math.floor(Math.random() * Object.keys(objects).length)];
        const randomX = Math.floor(Math.random() * (canvasWidth - objects[randomObject].width));
        const randomY = Math.floor(Math.random() * (canvasHeight - objects[randomObject].height));
        const randomRotation = Math.floor(Math.random() * 360);

        const newObject = Bodies.rectangle(randomX, randomY, objects[randomObject].width, objects[randomObject].height, {
            render: {
                sprite: {
                    texture: objects[randomObject].texture,
                }
            },
            // angle: randomRotation * Math.PI / 180,
            isStatic: objects[randomObject].isStatic || false
        });

        World.add(engine.world, [newObject]);
    }

    function toggleGravity() {
        engine.world.gravity.y = engine.world.gravity.y === 0 ? 1 : 0;
    }

</script>

</body>
</html>